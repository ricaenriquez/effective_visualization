install.packages(c("class", "foreign", "MASS", "nlme", "nnet", "spatial"))
exit
exit()
quit()
---
output:
html_document:
fig_height: 3
fig_width: 7.5
theme: cerulean
---
RITA 2008 Data Exploration by Rica Enriquez
========================================================
This data set contains 113,937 loans with 81 variables on each loan, including loan amount, borrower rate (or interest rate), current loan status, borrower income, and many others.
```{r echo = FALSE, message = FALSE, warning = FALSE, packages}
# Load all of the packages that you end up using
# in your analysis in this code chunk.
# Notice that the parameter "echo" is set to FALSE for this code chunk. This
# prevents the code from displaying in the knitted HTML output. You should set
# echo=FALSE for all code chunks in your file.
library(ggplot2)
library(dplyr)
library(RColorBrewer)
library(GGally)
library(psych)
library(gridExtra)
library(reshape2)
# Set ggplot themes to minimal and color scheme to div
theme_set(theme_minimal(12))
color_palette = "div"
```
#The Data Set
```{r echo = FALSE, Load_the_Data}
# Load the Data
# years = c(1987:2008)
# for (year in years) {
#   df <- read.csv(paste("data/", year, ".csv",  sep=""))
#   df <- subset(df, Dest == "MSP" | Origin == "MSP", select = -c(DepTime, ArrTime, Distance, TaxiIn, TaxiOut))
#   write.csv(df, paste("data/", year, "_MSP.csv",  sep=""))
# }
#
# df <- read.csv("data/1987_MSP.csv")
# years = c(1988:2008)
# for (year in years) {
#   df2 <- read.csv(paste("data/", year, "_MSP.csv",  sep=""))
#   df <- rbind(df, df2)
#   rm(df2)
# }
#
# df <- subset(df, Year >= 1987 & Year <= 2008, select = -c(X))
# write.csv(df, paste("data/", "MSP.csv",  sep=""))
# names_df <- names(df)
df <- read.csv('data/MSP.csv')
```
##Histograms
###Base Histograms of Wine Properties
A set of base histograms are created for all attributes.
```{r echo = FALSE, warning = FALSE, error = FALSE, message = FALSE, fig.width = 7.5, fig.height = 15,  cache = TRUE, cache.path = 'cache/', fig.path = 'figure/', Histogram2}
#Make Arrival/Departure
df$ArrDep <- 0
df$ArrDep[df$Origin == "MSP"] <- "Departing"
df$ArrDep[df$Dest == "MSP"] <- "Arriving"
#Make Status
df$Status <- "On Time"
df$Status[df$Cancelled==1] <- "Cancelled"
df$Status[df$Origin == "MSP" & df$DepDelay> 0 & df$DepDelay <=5] <- 'Short Delay'
df$Status[df$Origin == "MSP" & df$DepDelay> 5 & df$DepDelay <=30] <- 'Medium Delay'
df$Status[df$Origin == "MSP" & df$DepDelay> 30] <- 'Long Delay'
df$Status[df$Dest == "MSP" & df$ArrDelay> 0 & df$ArrDelay <=5] <- 'Short Delay'
df$Status[df$Dest == "MSP" & df$ArrDelay> 5 & df$ArrDelay <=30] <- 'Medium Delay'
df$Status[df$Dest == "MSP" & df$ArrDelay> 30] <- 'Long Delay'
df <- subset(df, Year >= 1988)
#Make Year Bins
df$Years <- 0
df$Years[df$Year >=1988 & df$Year<=1994] <- "1988-1994"
df$Years[df$Year >=1995 & df$Year<=2001] <- "1995-2001"
df$Years[df$Year >=2002 & df$Year<=2008] <- "2002-2008"
#Make Day Shift
df$TimeOfDay <- 0
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>400 & df$CRSDepTime<=1000] <- "Morning" #4 - 10
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>1000 & df$CRSDepTime<=1600] <- "Mid-Day" #10 -4
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>1600 & df$CRSDepTime<=2200] <- "Evening" #4 -10
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>2200 | df$CRSDepTime<=400] <- "Night" #10 -4
df$TimeOfDay[df$Dest== "MSP" & df$CRSArrTime>400 & df$CRSArrTime<=1000] <- "Morning" #4 - 10
df$TimeOfDay[df$Dest == "MSP" & df$CRSArrTime>1000 & df$CRSArrTime<=1600] <- "Mid-Day" #10 -4
df$TimeOfDay[df$Dest == "MSP" & df$CRSArrTime>1600 & df$CRSArrTime<=2200]<- "Evening" #4 -10
df$TimeOfDay[df$Dest == "MSP" & df$CRSArrTime>2200 | df$CRSArrTime<=400] <- "Night" #10 -4
df$DayOfWeek[df$DayOfWeek == 1] <- "Mon"
df$DayOfWeek[df$DayOfWeek == 2] <- "Tues"
df$DayOfWeek[df$DayOfWeek == 3] <- "Wed"
df$DayOfWeek[df$DayOfWeek == 4] <- "Thurs"
df$DayOfWeek[df$DayOfWeek == 5] <- "Fri"
df$DayOfWeek[df$DayOfWeek == 6] <- "Sat"
df$DayOfWeek[df$DayOfWeek == 7] <- "Sun"
df$Month[df$Month == 1] <- "Jan"
df$Month[df$Month == 2] <- "Feb"
df$Month[df$Month == 3] <- "Mar"
df$Month[df$Month == 4] <- "Apr"
df$Month[df$Month == 5] <- "May"
df$Month[df$Month == 6] <- "Jun"
df$Month[df$Month == 7] <- "Jul"
df$Month[df$Month == 8] <- "Aug"
df$Month[df$Month == 9] <- "Sept"
df$Month[df$Month == 10] <- "Oct"
df$Month[df$Month == 11] <- "Nov"
df$Month[df$Month == 12] <- "Dec"
df.for_dimple <- subset(df, select = -c(X, Year, DayofMonth, CRSDepTime, CRSArrTime, UniqueCarrier, AirTime, ArrDelay, DepDelay, Origin, Dest, Cancelled, CancellationCode, Diverted, CarrierDelay, WeatherDelay, NASDelay, SecurityDelay, LateAircraftDelay))
df.for_dimple <- df.for_dimple %>%
group_by(DayOfWeek, Status, TimeOfDay, Years, ArrDep, Month) %>%
summarise(NumberOfFlights=n()) %>%
arrange(DayOfWeek, Status, TimeOfDay, Years, ArrDep, Month)
#write.table(df.for_dimple, file="data/MSP_dimple.tsv", sep="\t",  col.names = NA)
```
library(ggplot2)
library(dplyr)
library(RColorBrewer)
library(GGally)
library(psych)
library(gridExtra)
library(reshape2)
theme_set(theme_minimal(12))
color_palette = "div"
df <- read.csv('../Data_Vis_Code_Files/flightdata/MSP.csv')
setwd("~/Udacity_Projects/effective_visualization")
df <- read.csv('../Data_Vis_Code_Files/flightdata/MSP.csv')
df$ArrDep <- 0
df$ArrDep[df$Origin == "MSP"] <- "Departing"
df$ArrDep[df$Dest == "MSP"] <- "Arriving"
df$Status <- "On Time"
df$Status[df$Cancelled==1] <- "Cancelled"
df$Status[df$Origin == "MSP" & df$DepDelay> 0 & df$DepDelay <=5] <- 'Short Delay'
df$Status[df$Origin == "MSP" & df$DepDelay> 5 & df$DepDelay <=30] <- 'Medium Delay'
df$Status[df$Origin == "MSP" & df$DepDelay> 30] <- 'Long Delay'
df$Status[df$Dest == "MSP" & df$ArrDelay> 0 & df$ArrDelay <=5] <- 'Short Delay'
df$Status[df$Dest == "MSP" & df$ArrDelay> 5 & df$ArrDelay <=30] <- 'Medium Delay'
df$Status[df$Dest == "MSP" & df$ArrDelay> 30] <- 'Long Delay'
df <- subset(df, Year >= 1988)
df$Years <- 0
df$Years[df$Year >=1988 & df$Year<=1994] <- "1988-1994"
df$Years[df$Year >=1995 & df$Year<=2001] <- "1995-2001"
df$Years[df$Year >=2002 & df$Year<=2008] <- "2002-2008"
df$TimeOfDay <- 0
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>400 & df$CRSDepTime<=1000] <- "Morning" #4 - 10
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>1000 & df$CRSDepTime<=1600] <- "Mid-Day" #10 -4
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>1600 & df$CRSDepTime<=2200] <- "Evening" #4 -10
df$TimeOfDay[df$Origin == "MSP" & df$CRSDepTime>2200 | df$CRSDepTime<=400] <- "Night" #10 -4
df$TimeOfDay[df$Dest== "MSP" & df$CRSArrTime>400 & df$CRSArrTime<=1000] <- "Morning" #4 - 10
df$TimeOfDay[df$Dest == "MSP" & df$CRSArrTime>1000 & df$CRSArrTime<=1600] <- "Mid-Day" #10 -4
df$TimeOfDay[df$Dest == "MSP" & df$CRSArrTime>1600 & df$CRSArrTime<=2200]<- "Evening" #4 -10
df$TimeOfDay[df$Dest == "MSP" & df$CRSArrTime>2200 | df$CRSArrTime<=400] <- "Night" #10 -4
df$DayOfWeek[df$DayOfWeek == 1] <- "Mon"
df$DayOfWeek[df$DayOfWeek == 2] <- "Tues"
df$DayOfWeek[df$DayOfWeek == 3] <- "Wed"
df$DayOfWeek[df$DayOfWeek == 4] <- "Thurs"
df$DayOfWeek[df$DayOfWeek == 5] <- "Fri"
df$DayOfWeek[df$DayOfWeek == 6] <- "Sat"
df$DayOfWeek[df$DayOfWeek == 7] <- "Sun"
df$Month[df$Month == 1] <- "Jan"
df$Month[df$Month == 2] <- "Feb"
df$Month[df$Month == 3] <- "Mar"
df$Month[df$Month == 4] <- "Apr"
df$Month[df$Month == 5] <- "May"
df$Month[df$Month == 6] <- "Jun"
df$Month[df$Month == 7] <- "Jul"
df$Month[df$Month == 8] <- "Aug"
df$Month[df$Month == 9] <- "Sept"
df$Month[df$Month == 10] <- "Oct"
df$Month[df$Month == 11] <- "Nov"
df$Month[df$Month == 12] <- "Dec"
df.for_dimple <- subset(df, select = -c(X, Year, DayofMonth, CRSDepTime, CRSArrTime, UniqueCarrier, AirTime, ArrDelay, DepDelay, Origin, Dest, Cancelled, CancellationCode, Diverted, CarrierDelay, WeatherDelay, NASDelay, SecurityDelay, LateAircraftDelay))
df.for_dimple <- df.for_dimple %>%
group_by(ArrDep, DayOfWeek, Status, TimeOfDay, Years, Month) %>%
summarise(NumberOfFlights=n()) %>%
arrange(ArrDep, DayOfWeek, Status, TimeOfDay, Years, Month)
write.table(df.for_dimple, file="data/MSP_dimple2.tsv", sep="\t",  col.names = NA)
cwd
write.table(df.for_dimple, file="MSP_dimple2.tsv", sep="\t",  col.names = NA)
